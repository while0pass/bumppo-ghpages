!function(e,t,n,i){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i;!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".bmpp-uiLayout{height:100vh}.bmpp-main,.bmpp-uiLayout{display:-webkit-box;display:-ms-flexbox;display:flex;width:100vw}.bmpp-main{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;overflow-y:scroll;padding-bottom:3em}.bmpp-mainWait{position:fixed;top:0;right:0;width:86vw;height:100vh;z-index:1001;border-left:.3em solid transparent!important}.bmpp-mainWait div{position:absolute!important;top:0!important;bottom:0!important;left:0!important;right:0!important}.bmpp-sidePane{-webkit-box-ordinal-group:1;-ms-flex-order:0;order:0;width:14vw;min-width:208px;min-width:13rem;border-left:1px solid rgba(34,36,38,.15);border-right:1px solid rgba(34,36,38,.15);overflow-y:hidden}.bmpp-sidePane_menuItem{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:1em 1.5em!important;border-bottom:1px solid rgba(34,36,38,.15);border-right:.3em solid transparent!important;cursor:pointer}.bmpp-sidePane_menuItem.disabled{cursor:auto}.bmpp-sidePane_menuItem--current{border-right:.3em solid rgba(34,36,38,.25)!important;background-color:hsla(0,0%,98%,.75)!important}.bmpp-sidePane_menuItem--hover,.bmpp-sidePane_menuItem--hover.bmpp-sidePane_menuItem--current{border-right:.3em solid #767676!important;background-color:hsla(0,0%,98%,.75)!important}.bmpp-sidePane_menuItem--hover.bmpp-sidePane_menuItem--current.disabled,.bmpp-sidePane_menuItem--hover.disabled{border-right:.3em solid transparent!important;background-color:transparent!important}.bmpp-sidePane_menuItem .icon{position:absolute;right:1em}.bmpp-sidePane_searchButton{margin-left:.3em!important}.bmpp-paddedPane{width:55em;margin:3em auto auto 6em!important}.bmpp-propertiesPane{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.bmpp-propertiesPaneProps{height:calc(100vh - 3.2em);overflow-y:scroll;overflow-x:hidden}.bmpp-propertiesPaneDivider{height:1em;border-bottom:1px solid rgba(34,36,38,.05)}.bmpp-propertiesPaneButtons{height:2.2em;padding:1em 0 0 6em}.bmpp-resultsOptionsPane{width:55em;margin:3em auto auto 6em!important}.bmpp-nearLabelIcon{margin:0;padding:0;position:absolute;right:.2em;top:.8em}.bmpp-resultsPane{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.bmpp-resultsPane_video{border-bottom:1px solid rgba(34,36,38,.15);background-color:#eee}.bmpp-resultsPane_results{overflow-y:scroll}.bmpp-queryPane{display:-webkit-box;display:-ms-flexbox;display:flex;overflow:hidden}.bmpp-query,.bmpp-queryPane{-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.bmpp-query{max-width:70em;padding:3em 7em 0 0;-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}.bmpp-queryTree{-webkit-box-ordinal-group:1;-ms-flex-order:0;order:0;width:9em;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}.bmpp-queryElement{min-height:10em}.bmpp-queryTreeHandles{position:absolute;right:auto;left:100%;top:.45em;width:6em;padding-left:1em}.bmpp-queryTreeHandles .ui.icon{cursor:pointer}.bmpp-queryTreeHandles.bmpp-queryTreeHandles2{left:calc(100% + 1em)}.bmpp-number{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.bmpp-number,.bmpp-number label{margin-right:1em}.bmpp-number .bmpp-numberControls{display:none}.bmpp-number:hover .bmpp-numberControls{display:block;width:40px;width:2.5rem;height:40px;height:2.5rem;right:0;top:.1em;position:absolute}.bmpp-number:hover .bmpp-numberControls .icon{width:40px;width:2.5rem;height:20px;height:1.25rem;-webkit-transition:opacity .3s ease,font-size .1s ease!important;transition:opacity .3s ease,font-size .1s ease!important;position:absolute;overflow:hidden}.bmpp-number:hover .bmpp-numberControls .icon:hover{font-size:large!important}.bmpp-number:hover .bmpp-numberControls .icon:last-of-type{top:50%}.bmpp-number:hover .bmpp-numberControls .icon:before{position:absolute;top:5%;bottom:0;left:0;right:0;line-height:0!important}.bmpp-number:hover .bmpp-numberControls .icon:first-of-type:before{bottom:5%;top:95%}.bmpp-queryDistances{margin:1em auto!important;position:relative}.bmpp-queryDistances--toOtherElement{margin-top:3em!important}.bmpp-queryDistances .bmpp-queryDistance{min-height:4em}.bmpp-queryDistances .bmpp-queryDistance .ui.form{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.bmpp-queryDistances .bmpp-queryDistance .ui.form .field{margin-right:1em}.bmpp-queryDistances .bmpp-queryDistance .ui.form .field.bmpp-units{width:8em!important}.bmpp-queryDistances .bmpp-queryDistance .ui.form .field.bmpp-points{width:14em!important}.bmpp-queryDistances .bmpp-queryDistance .ui.form .bmpp-units .text{border-bottom:1px dashed grey!important}.bmpp-queryDistances .bmpp-queryDistance .ui.form input[type=number]{width:6em!important}.bmpp-queryDistances .bmpp-queryDistance .ui.form .ui.selection.dropdown{height:2em!important;padding-top:.5em!important}.bmpp-queryDistances .bmpp-queryDistanceHelp{position:absolute;top:1em!important;right:.5em!important}.bmpp-subcorpusForm{height:12em}.bmpp-subcorpusForm header{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.bmpp-subcorpusForm .ui.form{-webkit-column-count:auto!important;-webkit-column-width:10rem!important;columns:10rem!important}.bmpp-unitGroups{list-style:none;margin:0;padding:0}.bmpp-unitGroups li{font-style:italic;margin:0;-webkit-column-break-inside:avoid;break-inside:avoid}.bmpp-units{list-style:none;margin:.5em 0 1.5em;padding:0}.bmpp-units li{font-style:normal;line-height:1.5em;cursor:pointer}.bmpp-units li .unit{border-bottom:1px dotted #2185d0;color:#2185d0}.bmpp-units li .unitSelectionContainer{padding:0 .5em .2em}.bmpp-units li.active .unit{border-bottom:none;color:#fff}.bmpp-units li.active .unitSelectionContainer{background-color:#2185d0}.bmpp-channelSlug{width:6em!important}.bmpp-editUrl{font-size:smaller;border-bottom:1px dotted #2185d0;color:#2185d0;cursor:pointer}.bmpp-negativeNode{padding-top:3.4em!important}.bmpp-valueList{margin:0;padding:0;list-style:none}.bmpp-valueList li{margin-bottom:.5em}.bmpp-valueList .bmpp-valueList{padding:.7em 0 .5em 1.7em}.bmpp-listItemValue{color:#2c662d;padding:0 .1em}.bmpp-editableListItem{display:block!important;margin:.7em 0 0 2.4em}.bmpp-propertyHeader{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.bmpp-propertyHeader.clickable{cursor:copy}.bmpp-bannerPropname{color:grey;font-style:italic}.bmpp-bannerText{color:grey}");"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function a(e,t){return e(t={exports:{}},t.exports),t.exports}var r=1e3,o=60*r,s=60*o,l=24*s,u=7*l,c=365.25*l,d=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"weeks":case"week":case"w":return n*u;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s;case"minutes":case"minute":case"mins":case"min":case"m":return n*o;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===n&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);if(t>=l)return p(e,t,l,"day");if(t>=s)return p(e,t,s,"hour");if(t>=o)return p(e,t,o,"minute");if(t>=r)return p(e,t,r,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=l)return Math.round(e/l)+"d";if(t>=s)return Math.round(e/s)+"h";if(t>=o)return Math.round(e/o)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function p(e,t,n,i){var a=t>=1.5*n;return Math.round(e/n)+" "+i+(a?"s":"")}var h=function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){let r;function o(...e){if(!o.enabled)return;const t=o,i=Number(new Date),a=i-(r||i);t.diff=a,t.prev=r,t.curr=i,r=i,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(i,a)=>{if("%%"===i)return i;s++;const r=n.formatters[a];if("function"==typeof r){const n=e[s];i=r.call(t,n),e.splice(s,1),s--}return i}),n.formatArgs.call(t,e),(t.log||n.log).apply(t,e)}return o.namespace=e,o.enabled=n.enabled(e),o.useColors=n.useColors(),o.color=t(e),o.destroy=i,o.extend=a,"function"==typeof n.init&&n.init(o),n.instances.push(o),o}function i(){const e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function a(e,t){return n(this.namespace+(void 0===t?":":t)+e)}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){const e=[...n.names.map(r),...n.skips.map(r).map(e=>"-"+e)].join(",");return n.enable(""),e},n.enable=function(e){let t;n.save(e),n.names=[],n.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),a=i.length;for(t=0;t<a;t++)i[t]&&("-"===(e=i[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){const e=n.instances[t];e.enabled=n.enabled(e.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;let t,i;for(t=0,i=n.skips.length;t<i;t++)if(n.skips[t].test(e))return!1;for(t=0,i=n.names.length;t<i;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=d,Object.keys(e).forEach(t=>{n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n},m=a(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let i=0,a=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(a=i))}),t.splice(a,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=h(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});m.log,m.formatArgs,m.save,m.load,m.useColors,m.storage,m.colors,m("bumppo:log");m.disable();var v=a(function(e,t){e.exports=function(){var e=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},t=m,n=s,i=function(e){return l(s(e))},a=l,r=h,o=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e){for(var t,n=[],i=0,a=0,r="";null!=(t=o.exec(e));){var s=t[0],l=t[1],u=t.index;if(r+=e.slice(a,u),a=u+s.length,l)r+=l[1];else{r&&(n.push(r),r="");var d=t[2],p=t[3],h=t[4],m=t[5],v=t[6],b=t[7],f="+"===v||"*"===v,y="?"===v||"*"===v,g=d||"/",x=h||m||(b?".*":"[^"+g+"]+?");n.push({name:p||i++,prefix:d||"",delimiter:g,optional:y,repeat:f,pattern:c(x)})}}return a<e.length&&(r+=e.substr(a)),r&&n.push(r),n}function l(t){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"==typeof t[i]&&(n[i]=new RegExp("^"+t[i].pattern+"$"));return function(i){for(var a="",r=i||{},o=0;o<t.length;o++){var s=t[o];if("string"!=typeof s){var l,u=r[s.name];if(null==u){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to be defined')}if(e(u)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but received "'+u+'"');if(0===u.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var c=0;c<u.length;c++){if(l=encodeURIComponent(u[c]),!n[o].test(l))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but received "'+l+'"');a+=(0===c?s.prefix:s.delimiter)+l}}else{if(l=encodeURIComponent(u),!n[o].test(l))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but received "'+l+'"');a+=s.prefix+l}}else a+=s}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function d(e,t){return e.keys=t,e}function p(e){return e.sensitive?"":"i"}function h(e,t){for(var n=(t=t||{}).strict,i=!1!==t.end,a="",r=e[e.length-1],o="string"==typeof r&&/\/$/.test(r),s=0;s<e.length;s++){var l=e[s];if("string"==typeof l)a+=u(l);else{var c=u(l.prefix),d=l.pattern;l.repeat&&(d+="(?:"+c+d+")*"),d=l.optional?c?"(?:"+c+"("+d+"))?":"("+d+")?":c+"("+d+")",a+=d}}return n||(a=(o?a.slice(0,-2):a)+"(?:\\/(?=$))?"),a+=i?"$":n&&o?"":"(?=\\/|$)",new RegExp("^"+a,p(t))}function m(t,n,i){return e(n=n||[])?i||(i={}):(i=n,n=[]),t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return d(e,t)}(t,n):e(t)?function(e,t,n){for(var i=[],a=0;a<e.length;a++)i.push(m(e[a],t,n).source);return d(new RegExp("(?:"+i.join("|")+")",p(n)),t)}(t,n,i):function(e,t,n){for(var i=s(e),a=h(i,n),r=0;r<i.length;r++)"string"!=typeof i[r]&&t.push(i[r]);return d(a,t)}(t,n,i)}t.parse=n,t.compile=i,t.tokensToFunction=a,t.tokensToRegExp=r;var v,b="undefined"!=typeof document,f="undefined"!=typeof window,y="undefined"!=typeof history,g="undefined"!=typeof process,x=b&&document.ontouchstart?"touchstart":"click",w=f&&!(!window.history.location&&!window.location);function k(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function _(e,t){if("function"==typeof e)return _.call(this,"*",e);if("function"==typeof t)for(var n=new N(e,null,this),i=1;i<arguments.length;++i)this.callbacks.push(n.middleware(arguments[i]));else"string"==typeof e?this["string"==typeof t?"redirect":"show"](e,t):this.start(e)}function C(e,t,n){var i=this.page=n||_,a=i._window,r=i._hashbang,o=i._getBase();"/"===e[0]&&0!==e.indexOf(o)&&(e=o+(r?"#!":"")+e);var s=e.indexOf("?");if(this.canonicalPath=e,this.path=e.replace(o,"")||"/",r&&(this.path=this.path.replace("#!","")||"/"),this.title=b&&a.document.title,this.state=t||{},this.state.path=e,this.querystring=~s?i._decodeURLEncodedURIComponent(e.slice(s+1)):"",this.pathname=i._decodeURLEncodedURIComponent(~s?e.slice(0,s):e),this.params={},this.hash="",!r){if(!~this.path.indexOf("#"))return;var l=this.path.split("#");this.path=this.pathname=l[0],this.hash=i._decodeURLEncodedURIComponent(l[1])||"",this.querystring=this.querystring.split("#")[0]}}function N(e,n,i){this.page=i||P;var a=n||{};a.strict=a.strict||i._strict,this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=t(this.path,this.keys=[],a)}k.prototype.configure=function(e){var t=e||{};this._window=t.window||f&&window,this._decodeURLComponents=!1!==t.decodeURLComponents,this._popstate=!1!==t.popstate&&f,this._click=!1!==t.click&&b,this._hashbang=!!t.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):f&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener(x,this.clickHandler,!1):b&&n.document.removeEventListener(x,this.clickHandler,!1),this._hashbang&&f&&!y?n.addEventListener("hashchange",this._onpopstate,!1):f&&n.removeEventListener("hashchange",this._onpopstate,!1)},k.prototype.base=function(e){if(0===arguments.length)return this._base;this._base=e},k.prototype._getBase=function(){var e=this._base;if(e)return e;var t=f&&this._window&&this._window.location;return f&&this._hashbang&&t&&"file:"===t.protocol&&(e=t.pathname),e},k.prototype.strict=function(e){if(0===arguments.length)return this._strict;this._strict=e},k.prototype.start=function(e){var t=e||{};if(this.configure(t),!1!==t.dispatch){var n;if(this._running=!0,w){var i=this._window,a=i.location;n=this._hashbang&&~a.hash.indexOf("#!")?a.hash.substr(2)+a.search:this._hashbang?a.search+a.hash:a.pathname+a.search+a.hash}this.replace(n,null,!0,t.dispatch)}},k.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(x,this.clickHandler,!1),f&&e.removeEventListener("popstate",this._onpopstate,!1),f&&e.removeEventListener("hashchange",this._onpopstate,!1)}},k.prototype.show=function(e,t,n,i){var a=new C(e,t,this),r=this.prevContext;return this.prevContext=a,this.current=a.path,!1!==n&&this.dispatch(a,r),!1!==a.handled&&!1!==i&&a.pushState(),a},k.prototype.back=function(e,t){var n=this;if(this.len>0){var i=this._window;y&&i.history.back(),this.len--}else e?setTimeout(function(){n.show(e,t)}):setTimeout(function(){n.show(n._getBase(),t)})},k.prototype.redirect=function(e,t){var n=this;"string"==typeof e&&"string"==typeof t&&_.call(this,e,function(e){setTimeout(function(){n.replace(t)},0)}),"string"==typeof e&&void 0===t&&setTimeout(function(){n.replace(e)},0)},k.prototype.replace=function(e,t,n,i){var a=new C(e,t,this),r=this.prevContext;return this.prevContext=a,this.current=a.path,a.init=n,a.save(),!1!==i&&this.dispatch(a,r),a},k.prototype.dispatch=function(e,t){var n=0,i=0,a=this;function r(){var t=a.callbacks[n++];if(e.path===a.current)return t?void t(e,r):function(e){if(!e.handled){var t=this._window;(this._hashbang?w&&this._getBase()+t.location.hash.replace("#!",""):w&&t.location.pathname+t.location.search)!==e.canonicalPath&&(this.stop(),e.handled=!1,w&&(t.location.href=e.canonicalPath))}}.call(a,e);e.handled=!1}t?function e(){var n=a.exits[i++];if(!n)return r();n(t,e)}():r()},k.prototype.exit=function(e,t){if("function"==typeof e)return this.exit("*",e);for(var n=new N(e,null,this),i=1;i<arguments.length;++i)this.exits.push(n.middleware(arguments[i]))},k.prototype.clickHandler=function(e){if(1===this._which(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){var t=e.target,n=e.path||(e.composedPath?e.composedPath():null);if(n)for(var i=0;i<n.length;i++)if(n[i].nodeName&&"A"===n[i].nodeName.toUpperCase()&&n[i].href){t=n[i];break}for(;t&&"A"!==t.nodeName.toUpperCase();)t=t.parentNode;if(t&&"A"===t.nodeName.toUpperCase()){var a="object"==typeof t.href&&"SVGAnimatedString"===t.href.constructor.name;if(!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var r=t.getAttribute("href");if((this._hashbang||!this._samePath(t)||!t.hash&&"#"!==r)&&!(r&&r.indexOf("mailto:")>-1)&&(a?!t.target.baseVal:!t.target)&&(a||this.sameOrigin(t.href))){var o=a?t.href.baseVal:t.pathname+t.search+(t.hash||"");o="/"!==o[0]?"/"+o:o,g&&o.match(/^\/[a-zA-Z]:\//)&&(o=o.replace(/^\/[a-zA-Z]:\//,"/"));var s=o,l=this._getBase();0===o.indexOf(l)&&(o=o.substr(l.length)),this._hashbang&&(o=o.replace("#!","")),(!l||s!==o||w&&"file:"===this._window.location.protocol)&&(e.preventDefault(),this.show(s))}}}}},k.prototype._onpopstate=(v=!1,f?(b&&"complete"===document.readyState?v=!0:window.addEventListener("load",function(){setTimeout(function(){v=!0},0)}),function(e){if(v)if(e.state){var t=e.state.path;this.replace(t,e.state)}else if(w){var n=this._window.location;this.show(n.pathname+n.search+n.hash,void 0,void 0,!1)}}):function(){}),k.prototype._which=function(e){return null==(e=e||f&&this._window.event).which?e.button:e.which},k.prototype._toURL=function(e){var t=this._window;if("function"==typeof URL&&w)return new URL(e,t.location.toString());if(b){var n=t.document.createElement("a");return n.href=e,n}},k.prototype.sameOrigin=function(e){if(!e||!w)return!1;var t=this._toURL(e),n=this._window,i=n.location;return i.protocol===t.protocol&&i.hostname===t.hostname&&i.port===t.port},k.prototype._samePath=function(e){if(!w)return!1;var t=this._window,n=t.location;return e.pathname===n.pathname&&e.search===n.search},k.prototype._decodeURLEncodedURIComponent=function(e){return"string"!=typeof e?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e},C.prototype.pushState=function(){var e=this.page,t=e._window,n=e._hashbang;e.len++,y&&t.history.pushState(this.state,this.title,n&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},C.prototype.save=function(){var e=this.page;y&&"file:"!==e._window.location.protocol&&e._window.history.replaceState(this.state,this.title,e._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},N.prototype.middleware=function(e){var t=this;return function(n,i){if(t.match(n.path,n.params))return e(n,i);i()}},N.prototype.match=function(e,t){var n=this.keys,i=e.indexOf("?"),a=~i?e.slice(0,i):e,r=this.regexp.exec(decodeURIComponent(a));if(!r)return!1;for(var o=1,s=r.length;o<s;++o){var l=n[o-1],u=this.page._decodeURLEncodedURIComponent(r[o]);void 0===u&&hasOwnProperty.call(t,l.name)||(t[l.name]=u)}return!0};var P=function e(){var t=new k;function n(){return _.apply(t,arguments)}return n.callbacks=t.callbacks,n.exits=t.exits,n.base=t.base.bind(t),n.strict=t.strict.bind(t),n.start=t.start.bind(t),n.stop=t.stop.bind(t),n.show=t.show.bind(t),n.back=t.back.bind(t),n.redirect=t.redirect.bind(t),n.replace=t.replace.bind(t),n.dispatch=t.dispatch.bind(t),n.exit=t.exit.bind(t),n.configure=t.configure.bind(t),n.sameOrigin=t.sameOrigin.bind(t),n.clickHandler=t.clickHandler.bind(t),n.create=e,Object.defineProperty(n,"len",{get:function(){return t.len},set:function(e){t.len=e}}),Object.defineProperty(n,"current",{get:function(){return t.current},set:function(e){t.current=e}}),n.Context=C,n.Route=N,n}(),S=P,O=P;return S.default=O,S}()}),b={viewModel:{createViewModel:function(e,t){var a=t.element,r=e.value,o=e.disabled,s=e.disabledTooltip,l={onChange:function(){r(!r())}},u={content:s,variation:"basic",position:"right center",transition:"fade",delay:{show:500,hide:0},duration:400,onVisible:function(e){setTimeout(function(e){n(e).popup("hide")}.bind(this,e),1700)}};return r.checkboxComponent=a,i.unwrap(o)?s&&n(a).popup(u):n(a).checkbox(l),{disabled:o,label:e.label,tabindex:e.tabindex,value:r}}},template:'\n\n  <div class="ui checkbox" data-bind="css: { disabled: disabled }">\n    <input type="checkbox" class="hidden"\n      data-bind="checked: ko.unwrap(disabled) ? false : value,\n        attr: { tabindex: tabindex }">\n    <label data-bind="text: label"></label>\n  </div>\n\n'};function f(e,t){function n(){var t=e();return"number"==typeof t?t.toString():""}var a=i.computed({read:n,write:function(i){var a=e(),r=n(),o=t.makeValueValid(i),s=parseInt(o,10),l=isNaN(s)?null:s;l!==a?e(l):i!==r&&e.notifySubscribers(l)}}).extend({notify:"always"});return a.relatedObservable=e,a}var y={viewModel:{createViewModel:function(e,t){var n=e.property;return{property:n,step:function(e,t){return function(){var n=e.relatedObservable,i=n();null===i&&(i=n.min>0?n.min:0),"+"===t&&(i=Math.floor(i/n.step+1)*n.step),"-"===t&&(i=Math.ceil(i/n.step-1)*n.step),i<n.min&&(i=n.min),null!==n.max&&i>n.max&&(i=n.max),n(i)}},validatableFrom:f(n.from,n),validatableTo:f(n.to,n)}}},template:'\n\n  <div class="ui inline input bmpp-number">\n    <label data-bind="text: property.from.label"></label>\n    <input type="text" pattern="-?[0-9]*" inputmode="numeric"\n      data-bind="attr: { placeholder: property.from.placeholder },\n        value: validatableFrom, valueUpdate: \'input\',">\n    <div class="bmpp-numberControls">\n      <i class="grey link icon sort up"\n        data-bind="click: step(validatableFrom, \'+\')"></i>\n      <i class="grey link icon sort down"\n        data-bind="click: step(validatableFrom, \'-\')"></i>\n    </div>\n  </div>\n\n  <div class="ui inline input bmpp-number">\n    <label data-bind="text: property.to.label"></label>\n    <input type="text" pattern="-?[0-9]*" inputmode="numeric"\n      data-bind="attr: { placeholder: property.to.placeholder },\n        value: validatableTo, valueUpdate: \'input\',">\n    <div class="bmpp-numberControls">\n      <i class="grey link icon sort up"\n        data-bind="click: step(validatableTo, \'+\')"></i>\n      <i class="grey link icon sort down"\n        data-bind="click: step(validatableTo, \'-\')"></i>\n    </div>\n  </div>\n\n  <span class="bmpp-units" data-bind="text: property.units"></span>\n\n'},g={viewModel:{createViewModel:function(e,t){return e.property}},template:'\n\n  <bmpp-value-list params="valueList: valueList"></bmpp-value-list>\n\n'},x={viewModel:{createViewModel:function(e,t){return{node:e.node}}},template:'\n\n  \x3c!-- ko with: node --\x3e\n\n  <header class="ui header">\n    \x3c!-- ko with: unitType --\x3e\n\n      <button class="ui button bmpp-channelSlug"\n        data-bind="css: channel.color, text: channel.id">\n      </button>\n\n      <span style="padding-left: .5em; font-weight: normal;">Тип единицы:</span>\n\n      <span data-bind="text: hasAbbr ? abbr : name"\n        style="padding-left: .5em; font-weight: bold"></span>\n\n    \x3c!-- /ko --\x3e\n  </header>\n\n  <div data-bind="foreach: unitProperties">\n    <search-unit-property params="property: $data"></search-unit-property>\n  </div>\n\n  \x3c!-- /ko --\x3e\n\n'};function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),e}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?S(e):t}function F(e,t,n){return(F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function L(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var T=function(){function e(t,n,i){w(this,e);var a=this.drawCircle(t),r=this.drawText(t,i.serialNumber());this.draw=t,this.element=n,this.treeNode=i,this.svgText=r,this.svg=t.group().add(a).add(r),this.fineTune()}return _(e,[{key:"drawCircle",value:function(e){return e.circle(30).attr({fill:"none",stroke:"#aaa","stroke-width":1}).cx(15).cy(15)}},{key:"drawText",value:function(e,t){return e.text(String(t)).attr({fill:"#aaa"}).cx(15).cy(15)}},{key:"fineTune",value:function(){var e=this;this.position(),this.treeNode.serialNumber.subscribe(function(t){e.changeText(t)}),i.utils.domNodeDisposal.addDisposeCallback(this.element,function(){e.dispose()}),this.treeNode.svgSlug=this}},{key:"position",value:function(){var e=n(this.element).offset().top,t=n(this.element).parent().offset().top,i=Math.abs(e-t)+18;this.svg.x(83).y(i)}},{key:"changeText",value:function(e){this.svgText=this.svgText.text(String(e))}},{key:"dispose",value:function(){this.svg.remove(),this.svgText.remove()}}]),e}(),E=function(){function e(t,n,i){w(this,e),this.draw=t,this.element=n,this.treeNode=i,this.svg=this.drawLine(t,i),this.fineTune()}return _(e,[{key:"fineTune",value:function(){var e=this;i.utils.domNodeDisposal.addDisposeCallback(this.element,function(){e.dispose()}),this.treeNode.svgRelationLine=this}},{key:"drawLine",value:function(e,t){var n="";if(t.parentNode){var i=t.parentNode.svgSlug.svg;n="M ".concat(i.cx()," ").concat(i.cy()+15,"\n              L ").concat(i.cx()," ").concat(i.cy()+15)}return e.path(n).fill("none").stroke({color:"#aaa",width:1})}},{key:"redrawLine",value:function(){var t=this.treeNode.parentNode&&this.treeNode.parentNode.svgSlug,i=this.treeNode.svgSlug,a=this.treeNode.level,r=n(this.element).height();if(t&&i&&a){var o=e.calculatePath(t,i,a(),r);this.svg.plot(o)}}},{key:"dispose",value:function(){this.svg.remove()}}],[{key:"calculatePath",value:function(e,t,n,i){var a=e.svg,r=t.svg,o=15,s=i-45,l=n<3?n:2,u=n<3?0:n-2,c=67.5;return 0===n?"M ".concat(a.cx()," ").concat(a.cy()+o,"\n              L ").concat(r.cx()," ").concat(r.cy()-o):"M ".concat(a.cx()," ").concat(a.cy()+o,"\n              V ").concat(a.cy()+o+7.5,"\n              C ").concat(a.cx()," ").concat(a.cy()+o+7.5+45,"\n                ").concat(a.cx()-15-19.5*l-7.5*u," ").concat(a.cy()+o+7.5+c-45,"\n                ").concat(a.cx()-15-19.5*l-7.5*u," ").concat(a.cy()+o+7.5+c,"\n              V ").concat(r.cy()-o-s-c,"\n              C ").concat(r.cx()-15-19.5*l-7.5*u," ").concat(r.cy()-o-s-c+45,"\n                ").concat(r.cx()," ").concat(r.cy()-o-s-45,"\n                ").concat(r.cx()," ").concat(r.cy()-o-s,"\n              V ").concat(r.cy()-o)}}]),e}(),q={viewModel:{createViewModel:function(e,t){var i=e.node,a={variation:"basic",position:"bottom right",transition:"fade",delay:{show:1e3,hide:0},duration:400,onVisible:function(e){setTimeout(function(e){n(e).popup("hide")}.bind(this,e),1700)}};return new T(e.draw,t.element,i),n(document).ready(function(){var e=n(t.element);a.content="Добавить единицу поиска",e.find(".bmpp-addPositiveUnit").popup(a),a.content="Добавить отрицательную единицу поиска",e.find(".bmpp-addNegativeUnit").popup(a),e.find(".bmpp-negativeUnitHelp").popup({inline:!0})}),{node:i}}},template:'\n\n  <div class="bmpp-queryElement ui segment"\n    data-bind="css: { \'bmpp-negativeNode\': node.negative }">\n\n    <div class="bmpp-queryTreeHandles">\n\n      <i class="ui disabled green down arrow icon bmpp-addPositiveUnit"\n        data-bind="click: node.addChild.bind(node, false),\n          visible: !node.negative() && node.unitType() !== null"></i>\n\n      <i class="ui disabled red down arrow icon bmpp-addNegativeUnit"\n        data-bind="click: node.addChild.bind(node, true),\n          visible: !node.negative() && node.unitType() !== null"></i>\n\n      <i class="ui disabled grey close icon"\n        title="Удалить единицу поиска со всеми зависимостями"\n        data-bind="visible: node.depth() > 0,\n          click: function () {\n                   node.seppuku();\n                   $root.isQueryNew(true);\n                 }"></i>\n    </div>\n\n    <div class="ui top attached basic red label"\n      data-bind="visible: node.negative">\n      НЕТ\n      <i class="disabled grey question circle outline icon\n        bmpp-nearLabelIcon bmpp-negativeUnitHelp"></i>\n      <div class="ui basic popup hidden">\n        <header class="ui header">Отрицательное условие</header>\n\n        <p>При отрицательном условии ищутся контексты, в которых\n        <strong>нет</strong> единиц, обладающих указанными свойствами,\n        и располагающихся на указанном расстоянии.</p>\n\n        <p>Отрицательное условие всегда является терминальным: к ветке запроса,\n        заканчивающейся этой единицей, нельзя добавить еще одну единицу.</p>\n      </div>\n    </div>\n\n    <search-unit-choice params="node: node,\n      queryPartsNonReadiness: $root.queryPartsNonReadiness,\n      editNodeProperties: $root.queryPaneView.editNodeProperties,\n      finishEditingNodeProperties: $root.queryPaneView.finishEditingNodeProperties,\n      isQueryNew: $root.isQueryNew">\n    </search-unit-choice>\n\n  </div>\n\n'},R={viewModel:{createViewModel:function(e,t){var i=e.node,a=t.element,r={html:'\n\n  <header class="ui header">Условие на расстояние</header>\n\n  <p>В качестве условий можно по отдельности указывать интервалы расстояний\n  между началами (левыми границами) и концами (правыми границами) единиц.\n  Например, если задать условие «от&nbsp;−50 до&nbsp;100&nbsp;мс между началом\n  X и началом Y», будут найдены контексты, в которых левая граница\n  X располагается не левее, чем в&nbsp;50&nbsp;мс, и не правее, чем\n  в&nbsp;100&nbsp;мс, от левой границы Y.</p>\n\n  <p>Если для условия указано только одно значение, ограничения с другой\n  стороны не накладывается. Если не указано ни одно значение, это\n  интерпретируется как интервал «от&nbsp;0 до&nbsp;0». Значения задаются\n  в миллисекундах. Если X и Y являются единицам одного типа, между началом\n  X и концом Y можно задать расстояние в терминах единицы данного типа.</p>\n\n',variation:"basic fluid",setFluidWidth:!1,delay:{show:400,hide:0},duration:400,lastResort:!0,onShow:function(e){var t=n(e).popup("get popup");n(t).attr("style","width: 35em!important")}};return new E(e.draw,a,i),n(a).find(".bmpp-queryDistanceHelp").popup(r),n.initialize(".ui.dropdown",function(){n(this).dropdown()},{target:a}),{relations:i.relationsToParentNode,node:i}}},template:'\n\n  <div class="bmpp-queryDistances ui segments"\n    data-bind="css: { \'bmpp-queryDistances--toOtherElement\':\n                      $component.node.level() > 0 }">\n\n    \x3c!-- ko foreach: relations --\x3e\n      '.concat('\n\n  <div class="bmpp-queryDistance ui secondary segment">\n\n    <div class="ui tiny header" data-bind="visible: $index() === 0">\n      на расстоянии:\n    </div>\n\n    <div class="ui form" style="margin-bottom: -1em;">\n      <div class="bmpp-queryTreeHandles bmpp-queryTreeHandles2">\n        <i class="ui small disabled grey plus icon"\n          data-bind="visible: $index() === $component.relations().length - 1,\n                     click: childNode.addRelation.bind(childNode)">\n        </i>\n\n        <i class="ui small icon"\n          data-bind="visible: $index() !== $component.relations().length - 1">\n        </i>\n\n        <i class="ui small disabled grey close icon"\n          data-bind="visible: $index() !== 0,\n                   click: childNode.removeRelation.bind(childNode, $data)"></i>\n      </div>\n\n      <div class="inline field bmpp-number">\n        <label>от</label>\n        <input type="number" step="50" min="0" placeholder="0">\n      </div>\n\n      <div class="inline field bmpp-number">\n        <label>до</label>\n        <input type="number" step="50" min="0" placeholder="0">\n      </div>\n\n      <div class="inline field bmpp-units">\n        <div class="ui inline dropdown">\n          <div class="default text">миллисекунд</div>\n          <div class="menu">\n            <div class="item" data-value="ms">миллисекунд</div>\n            <div class="item" data-value="u">единиц</div>\n          </div>\n        </div>\n      </div>\n\n      <div class="inline field bmpp-points">\n        <div class="ui selection dropdown">\n          <input type="hidden" name="pp">\n          <label>между</label>\n          <i class="dropdown icon"></i>\n          <div class="default text">\n            началом\n            <div class="ui circular label"\n              data-bind="text: childNode.serialNumber"></div>\n          </div>\n          <div class="menu">\n            <div class="item" data-value="s">\n              началом\n              <div class="ui circular label"\n                data-bind="text: childNode.serialNumber"></div>\n            </div>\n            <div class="item" data-value="e">\n              концом\n              <div class="ui circular label"\n                data-bind="text: childNode.serialNumber"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="inline field bmpp-points">\n        <div class="ui selection dropdown">\n          <input type="hidden" name="cp">\n          <label>и</label>\n          <i class="dropdown icon"></i>\n          <div class="default text">\n            началом\n            <div class="ui circular label"\n              data-bind="text: parentNode.serialNumber"></div>\n          </div>\n          <div class="menu">\n            <div class="item" data-value="s">\n              началом\n              <div class="ui circular label"\n                data-bind="text: parentNode.serialNumber"></div>\n            </div>\n            <div class="item" data-value="e">\n              концом\n              <div class="ui circular label"\n                data-bind="text: parentNode.serialNumber"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n','\n    \x3c!-- /ko --\x3e\n\n    <i class="ui disabled grey question circle outline icon\n              bmpp-queryDistanceHelp"></i>\n  </div>\n\n')};function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.depth(),a=U.levels;if(0==i)a=U.levels=[0],U.serialNumber=1;else{if(!(0===i||a instanceof Array))throw"Нарушена правильная работа функции линеаризации дерева";if(n)a.push(0);else if(a.length===i+1)a[a.length-1]+=1;else{var r=Math.max.apply(Math,L(a.slice(i)));a.splice(i),a[i]=r+1}}if(e.level(a.slice(-1)[0]),e.serialNumber(U.serialNumber),U.serialNumber+=1,t.push(e),e.childNodes().length>0)for(var o=0;o<e.childNodes().length;o++){t=U(e.childNodes()[o],t,0==o)}return t}for(var A={viewModel:{createViewModel:function(e,n){var a=function(e){var t=!0,n=!1,i=void 0;try{for(var a,r=e[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;o.svgSlug&&o.svgSlug.position()}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}var s=!0,l=!1,u=void 0;try{for(var c,d=e.slice(1)[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var p=c.value;p.svgRelationLine&&p.svgRelationLine.redrawLine()}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}},r=i.computed(function(){var t=U(e.queryTree,[]),n=!0,i=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0)r.value.childNodes()}catch(e){i=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return t});return r.subscribe(a),new MutationObserver(function(){return void 0!==a.timeoutID&&clearTimeout(a.timeoutID),a.timeoutID=setTimeout(function(){a(r())},30),!0}).observe(n.element,{childList:!0,subtree:!0,attributes:!1,characterData:!1,attributeOldValue:!1,characterDataOldValue:!1}),{linearizedQueryTree:r,svgDraw:t("svgQueryTree").size("100%","100%")}}},template:'\n\n  <div class="bmpp-queryPane">\n    <div class="bmpp-queryTree" id="'.concat("svgQueryTree",'">\n    </div>\n    <div class="bmpp-query" data-bind="foreach: linearizedQueryTree">\n\n      <query-node-relations params="node: $data, draw: $component.svgDraw"\n        data-bind="visible: $data.parentNode">\n      </query-node-relations>\n\n      <query-node params="node: $data, draw: $component.svgDraw"></query-node>\n\n    </div>\n  </div>\n\n')},B=[{id:"voc",name:"Вокальные действия",unitsHeader:"Вокальные единицы",color:"red",types:[{name:"Верхний уровень сегментации",types:[{name:"Элементарная дискурсивная единица (ЭДЕ)",abbr:"ЭДЕ",id:"u_vEDU"},{name:"Изолированный смех",id:"u_vLaughLine"},{name:"Изолированный кластер заполненных пауз",id:"u_vFilledLine"},{name:"Самостоятельное неречевое вокальное явление",id:"u_vNonVerbalLine"}]},{name:"Нижний уровень сегментации",types:[{name:"Слово",id:"u_vWord"},{name:"Cмех",id:"u_vLaughSegm"},{name:"Заполненная пауза",id:"u_vFilledSegm"},{name:"Пауза со вдохом",id:"u_vHPause"},{name:"Неречевое вокальное действие",id:"u_vOtherSegm"},{name:"Абсолютная пауза",id:"u_v--AbsolutePause"}]},{name:"Параллельный уровень сегментации",types:[{name:"Вокальное явление, накладывающееся на речь",id:"u_vCollat"}]}]},{id:"ocul",name:"Направление взора",unitsHeader:"Единицы окуломоторного канала",color:"orange",types:[{name:"Фиксация",id:"u_oFixation"}]},{id:"facial",name:"Мимика",unitsHeader:"Единицы канала мимики",color:"yellow",disabled:!0,types:[]},{id:"ceph",name:"Жесты головы",unitsHeader:"Единицы цефалической жестикуляции",color:"green",types:[{name:"Базовый уровень сегментации",types:[{name:"Движение",id:"u_c1"},{name:"Неподвижность",id:"u_c2"}]},{name:"Дополнительный уровень сегментации",types:[{name:"Жест",id:"u_c3"},{name:"Адаптор",id:"u_c4"},{name:"Смена позы",id:"u_c5"}]}]},{id:"manu",name:"Жесты рук",unitsHeader:"Единицы мануальной жестикуляции",color:"teal",types:[{name:"Первый уровень сегментации",types:[{name:"Движение",id:"u_mMovement",tiers:["-mLtMovement","-mRtMovement"]},{name:"Неподвижность",id:"u_mStillness",tiers:["-mLtStillness","-mRtStillness"]}]},{name:"Второй уровень сегментации",types:[{name:"Жест",id:"u_mGesture",tiers:["-mGesture"]},{name:"Адаптор",id:"u_mAdaptor",tiers:["-mAdaptor"]},{name:"Смена позы",id:"u_mPostureAccomodator",tiers:["-mPostureAccomodator"]}]},{name:"Третий уровень сегментации",types:[{name:"Мануальная поза",id:"u_mPosture",tiers:["-mPosture"]},{name:"Фаза перехода",id:"u_mPostureChange",tiers:["-mPostureChange"]},{name:"Двигательная цепочка",id:"u_mMovementChain",tiers:["-mMovementChain"]},{name:"Жестовая цепочка",id:"u_mGestureChain",tiers:["-mGestureChain"]}]}]},{id:"torso",name:"Движения тела",unitsHeader:"Единицы жестикуляции тела",color:"blue",disabled:!0,types:[]},{id:"prox",name:"Проксемика",unitsHeader:"Единицы проксемики",color:"violet",disabled:!0,types:[]}],$=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;w(this,e),this.id=t.id,this.name=t.name,this.channel=n,this.group=i,this.hasAbbr=Boolean(t.abbr),this.abbr=t.abbr||"",t.tiers&&(this.tiers=t.tiers)},I=function(){function e(t,n){w(this,e),this.name=t.name,this.channel=n,this.units=[],this.totalNumberOfUnits=0,this.populateUnits(t)}return _(e,[{key:"populateUnits",value:function(e){var t=!0,n=!1,i=void 0;try{for(var a,r=e.types[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;this.units.push(new $(o,this.channel,this)),this.totalNumberOfUnits+=1}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}}}]),e}(),M=function(){function e(t){w(this,e),this.id=t.id,this.name=t.name||"",this.unitsHeader=t.unitsHeader||"",this.color=t.color,this.disabled=t.disabled,this.groups=[],this.units=[],this.totalNumberOfUnits=0,this.populateGroupsAndUnits(t)}return _(e,[{key:"populateGroupsAndUnits",value:function(e){var t=!0,n=!1,i=void 0;try{for(var a,r=e.types[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;if(o.types){var s=new I(o,this);this.groups.push(s),this.totalNumberOfUnits+=s.totalNumberOfUnits}else this.units.push(new $(o,this)),this.totalNumberOfUnits+=1}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}}},{key:"getSingleUnit",value:function(){if(1===this.totalNumberOfUnits){var e,t=(e=this.units.slice()).concat.apply(e,L(this.groups.map(function(e){return e.units.slice()})));if(t.length>0)return t[0]}return null}}]),e}(),D=[],H=0;H<B.length;H++){var j=B[H];D.push(new M(j))}var Q='\n\n  <header class="ui header">Единицы поиска</header>\n\n  <p>Чтобы выбрать единицу поиска, сначала укажите область разметки\n  в верхнем меню, а затем нажмите на нужный вам тип единицы.</p>\n\n',z='\n\n  <li data-bind="click: $component.iHaveChosenUnitType.bind($data),\n                 css: { active: $component.node.unitType() &&\n                                $component.node.unitType().id === id }">\n    <span class="unitSelectionContainer">\n      <span class="unit" data-bind="text: name"></span>\n    </span>\n  </li>\n\n',J='\n\n  <div>\n    \x3c!-- ko foreach: channelViewModels --\x3e\n    <button class="ui button bmpp-channelSlug"\n      data-bind="css: buttonCSS, text: channel.id,\n        popup: tooltip, popupOpts: channelPopupOpts,\n        popupAdditionalShowOnClick: disabled,\n        event: { click: onClick, mouseover: onMouseOver,\n                 mouseout: onMouseOut }">\n    </button>\n    \x3c!-- /ko --\x3e\n\n    <i class="disabled grey question circle outline icon bmpp-channelsHelp"\n      data-bind="popup: channelsHelp.html, popupOpts: channelsHelp.opts"></i>\n  </div>\n\n  \x3c!-- ko if: activeChannel --\x3e\n  <div data-bind="with: activeChannel" style="margin-top: 2em">\n    <header class="ui tiny header"\n      data-bind="text: channel.unitsHeader"></header>\n    <div style="column-count: 2">\n\n      \x3c!-- ko if: channel.groups --\x3e\n      <ul class="bmpp-unitGroups" data-bind="foreach: channel.groups">\n        <li>\n          <header data-bind="text: name"></header>\n          <ul class="bmpp-units" data-bind="foreach: units">\n            '.concat(z,'\n          </ul>\n        </li>\n      </ul>\n      \x3c!-- /ko --\x3e\n\n      \x3c!-- ko if: channel.units --\x3e\n      <ul class="bmpp-units" data-bind="foreach: channel.units">\n        ').concat(z,"\n      </ul>\n      \x3c!-- /ko --\x3e\n\n    </div>\n  </div>\n  \x3c!-- /ko --\x3e\n\n"),G="\n\n  \x3c!-- ko if: node.isEditStateForUnitType --\x3e\n  ".concat(J,"\n  \x3c!-- /ko --\x3e\n\n  \x3c!-- ko ifnot: node.isEditStateForUnitType --\x3e\n  ").concat('\n  <div>\n    \x3c!-- ko with: activeChannel --\x3e\n    <button class="ui button bmpp-channelSlug"\n      data-bind="css: channel.color, text: channel.id,\n        popup: tooltip, popupOpts: channelPopupOpts">\n    </button>\n    \x3c!-- /ko --\x3e\n\n    <span style="padding-left: .5em">Тип единицы:</span>\n    \x3c!-- ko with: node.unitType --\x3e\n      <strong data-bind="text: hasAbbr ? abbr : name"\n        style="padding-left: .5em"></strong>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: node.chosenUnitProperties().length > 0 --\x3e\n    <div data-bind="foreach: node.chosenUnitProperties"\n      style="margin: 1.5em 0 2.5em 0"\n      >\x3c!-- ko if: $index() === 0 --\x3e<span class="bmpp-bannerPropname"\n      data-bind="text: name"></span><span class="bmpp-bannerText"\n      >:&#x2002;</span>\x3c!-- /ko --\x3e\x3c!-- ko ifnot: $index() === 0 --\x3e<span\n      class="bmpp-bannerPropname" data-bind="textLowercaseFirstChar: name"\n      ></span><span class="bmpp-bannerText">:&#x2002;</span>\x3c!-- /ko --\x3e<span\n      data-bind="text: banner" class="bmpp-bannerPropvalue"></span><span\n      class="bmpp-bannerText" data-bind="text: $index() &lt; $parent.node.\n      chosenUnitProperties().length - 1 ? \';&#x2002;\' : \'.\'"></span\n    ></div>\n    \x3c!-- /ko --\x3e\n\n    <div style="position: absolute; bottom: 0.8em;">\n      <span data-bind="click: goEditUnitType" class="bmpp-editUrl">\n        Изменить тип единицы\n      </span>\n      <span data-bind="click: goEditUnitProperties" class="bmpp-editUrl"\n        style="margin-left: 1em">\n        <span data-bind="text: isAnyUnitPropertySet() ? \'Изменить\' : \'Задать\'">\n        </span> свойства единицы\n      </span>\n    </div>\n  </div>\n',"\n  \x3c!-- /ko --\x3e\n\n"),X=function(){function e(t,n,a){w(this,e);var r=this;this.channel=t,this.isActive=i.computed(function(){var e=n();return e&&e.channel&&e.channel.id===r.channel.id}),this.isMouseOver=i.observable(!1),this.onMouseOver=function(){r.isMouseOver(!0)},this.onMouseOut=function(){r.isMouseOver(!1)},this.disabled=this.channel.disabled||0===r.channel.totalNumberOfUnits,this.onClick=function(){r.disabled||(1===r.channel.totalNumberOfUnits?(n(r),a.call(r.channel.getSingleUnit())):n(r))},this.buttonCSS=i.computed(function(){var e=r.isActive(),t=r.isMouseOver();return n()?e||t?r.channel.color:"".concat(r.channel.color," basic"):r.channel.color})}return _(e,[{key:"tooltip",get:function(){return this.disabled?this.channel.name+'\n\n  <div style="font-size: smaller; font-style: italic">\n    Аннотация пока не готова.\n  </div>\n\n':this.channel.name}},{key:"channelPopupOpts",get:function(){return{variation:"basic",delay:{show:700,hide:0},duration:400,transition:"fade",onVisible:function(e){setTimeout(function(e){n(e).popup("hide")}.bind(this,e),1700)}}}}]),e}(),K={viewModel:function(){function e(t){w(this,e);var n=t.node,a=n.unitType(),r=a&&a.channel,o=i.observable(null),s=t.queryPartsNonReadiness,l=function(){n.isEditStateForUnitType(!0)},u=function(){n.unitType(this),n.isEditStateForUnitType(!1),t.isQueryNew(!0)},c=i.computed(function(){return n.unitProperties().some(function(e){return null!==e.value()})}).extend({rateLimit:500}),d=[];s.push(n.isEditStateForUnitType);var p=!0,h=!1,m=void 0;try{for(var v,b=D[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var f=v.value,y=new X(f,o,u);d.push(y),r&&r.id===f.id&&o(y)}}catch(e){h=!0,m=e}finally{try{p||null==b.return||b.return()}finally{if(h)throw m}}a||l(),this.node=n,this.channelViewModels=d,this.channelsHelp={html:Q,opts:{variation:"basic",delay:{show:400,hide:0},duration:400}},this.activeChannel=o,this.queryPartsNonReadiness=s,this.goEditUnitType=l,this.goEditUnitProperties=function(){t.editNodeProperties(n)},this.iHaveChosenUnitType=u,this.iHaveChosenUnitProperties=function(){t.finishEditingNodeProperties(),t.isQueryNew(!0)},this.isAnyUnitPropertySet=c}return _(e,[{key:"dispose",value:function(){this.queryPartsNonReadiness.remove(this.node.isEditStateForUnitType)}}]),e}(),template:G},W={viewModel:{createViewModel:function(e,t){return e.property}},template:'\n\n  <div class="ui top attached segment">\n    <div class="ui top attached large label">\n      <header class="bmpp-propertyHeader" data-bind="text: name,\n        click: onHeaderClick.bind($component),\n        css: { clickable: $component.isHeaderClickable }">\n      </header>\n      \x3c!-- ko if: help --\x3e\n        <i class="disabled question circle outline icon bmpp-nearLabelIcon"\n          data-bind="popup: help"></i>\n      \x3c!-- /ko --\x3e\n    </div>\n    <div class="ui hidden divider"></div>\n\n    \x3c!-- ko if: type === \'text\' --\x3e\n      <text-property params="property: $component"></text-property>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: type === \'interval\' --\x3e\n      <interval-property params="property: $component"></interval-property>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: type === \'list\' --\x3e\n      <list-property params="property: $component"></list-property>\n    \x3c!-- /ko --\x3e\n  </div>\n\n  <div class="ui bottom attached info mini message" style="margin-bottom: 1em;">\n    <div class="ui grid" style="margin: 0!important; padding: 0 !important">\n      <div class="ui eight wide column"\n        style="margin: 0!important; padding: 0 !important">\n\n        \x3c!-- ko if: jsonProperties().length === 0 --\x3e\n          Свойство не будет включено в запрос\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: banner --\x3e\n          <em data-bind="text: name"></em>:\n          <span data-bind="text: banner"></span>\n        \x3c!-- /ko --\x3e\n\n      </div>\n      <div class="ui eight wide column"\n        style="margin: 0!important; padding: 0 0 0 1em !important;">\n\n        <code style="font-size: smaller;">\n        \x3c!-- ko foreach: jsonProperties --\x3e\n          <span data-bind="text: JSON.stringify(prop, null, 1)"></span>:\n          <span data-bind="text: JSON.stringify(value, null, 1)"></span>\x3c!--\n            ko if: $index() !== $component.jsonProperties().length - 1 --\x3e,\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n        </code>\n\n      </div>\n    </div>\n  </div>\n\n'},Y={viewModel:{createViewModel:function(e,t){for(var i=e.records,a=e.recordPhases,r={variation:"basic",delay:{show:400,hide:0},duration:400},o=[{html:"\n\n  <p>При выборе одного или нескольких вариантов поиск будет\n  вестись только по указанным записям. В&nbsp;настоящий момент\n  для поиска доступны 4 из 6 записей.</p>\n\n",selector:".bmpp-recordsHelp"},{html:"\n\n  <p>При выборе одного или нескольких вариантов поиск будет\n  вестись только по указанным этапам: рассказу, разговору или\n  пересказу.</p>\n\n",selector:".bmpp-recordsPhasesHelp"}],s=0;s<o.length;s++){var l=o[s],u=l.html,c=l.selector;r.html=u,n(t.element).find(c).popup(r)}return{records:i,recordPhases:a,subcorpusClearSelection:function(){i.areAllUnchecked()||i.clearSelection(),a.areAllUnchecked()||a.clearSelection()}}}},template:'\n\n  <h1 class="ui header">Область поиска</h1>\n  <div class="ui grid">\n    <div class="ten wide column" data-bind="with: records">\n      <div class="ui padded segment bmpp-subcorpusForm">\n        <div class="ui top attached large label">\n          <header data-bind="click: invertSelection">\n            Записи\n          </header>\n          <i class="disabled question circle outline icon\n                    bmpp-nearLabelIcon bmpp-recordsHelp"></i>\n        </div>\n\n        <div class="ui form" data-bind="foreach: fields">\n          <div class="field">\n            <bmpp-checkbox params="value: value, label: label,\n              disabled: disabled, tabindex: $index,\n              disabledTooltip: \'Запись пока не готова\'"></bmpp-checkbox>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <div class="six wide column" data-bind="with: recordPhases">\n      <div class="ui padded segment bmpp-subcorpusForm">\n        <div class="ui top attached large label">\n          <header data-bind="click: invertSelection">\n            Этапы записей\n          </header>\n          <i class="disabled question circle outline icon\n             bmpp-nearLabelIcon bmpp-recordsPhasesHelp"></i>\n        </div>\n        <form class="ui form" data-bind="foreach: fields">\n          <div class="field">\n            <bmpp-checkbox params="value: value, label: label,\n              tabindex: $index() + $root.subcorpus.records.fields.length">\n            </bmpp-checkbox>\n          </div>\n        </form>\n\n      </div>\n    </div>\n\n    <div>\n      <button class="ui small button three wide column"\n        data-bind="click: subcorpusClearSelection">Очистить</button>\n      <button class="ui small button three wide column">Отмена</button>\n    </div>\n\n  </div>\n\n'},Z={viewModel:{createViewModel:function(e,t){return e.property}},template:'\n\n  <div class="ui small input">\n    <input type="text" data-bind="value: value, valueUpdate: \'input\',\n      attr: { placeholder: placeholder }">\n  </div>\n\n'},ee={viewModel:{createViewModel:function(e,t){var i={on:"focus",inline:!0,position:"bottom left",variation:"basic fluid",preserve:!0,closable:!1,hideOnScroll:!1,delay:{show:50,hide:300},duration:300,lastResort:!0};return n(t.element).find('.bmpp-editableListItem input[type="text"]').popup(i),{virtualKeyboardPopupOpts:i,listProperty:e.valueList.listProperty,valueList:e.valueList}}},template:'\n\n  <ul data-bind="foreach: valueList.items" class="bmpp-valueList">\n    <li>\n      <bmpp-checkbox params="label: name,\n        value: userChecked, disabled: disabled"></bmpp-checkbox>\n\n      \x3c!-- ko if: editable --\x3e\n        <div class="ui mini input bmpp-editableListItem">\n\n          <input type="text"\n            data-bind="value: value, valueUpdate: \'input\',\n              inlinePopup: $component.virtualKeyboardPopupOpts">\n\n          \x3c!-- ko if: $component.listProperty.virtualKeyboard --\x3e\n          <div class="ui basic popup hidden">\n            \x3c!-- ko foreach: $component.listProperty.validChars --\x3e\n              <button class="ui mini button" data-bind="text: $data,\n                click: $component.listProperty.insertText($data, $element,\n                  $parent.value)"></button>\n            \x3c!-- /ko --\x3e\n          </div>\n          \x3c!-- /ko --\x3e\n\n        </div>\n      \x3c!-- /ko --\x3e\n\n      \x3c!-- ko if: $component.listProperty.displayValues &&\n                  [true, false, null, undefined].indexOf(value) < 0 &&\n                  !editable --\x3e\n        \x3c!-- ko if: value instanceof Array --\x3e\n          (\x3c!-- ko foreach: value --\x3e<span data-bind="if: $index() > 0">,\n            </span><span data-bind="text: $data" class="bmpp-listItemValue">\n            </span>\x3c!-- /ko --\x3e)\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko ifnot: value instanceof Array --\x3e\n          (<span data-bind="text: value" class="bmpp-listItemValue"></span>)\n        \x3c!-- /ko --\x3e\n      \x3c!-- /ko --\x3e\n\n      \x3c!-- ko if: childList --\x3e\n        <bmpp-value-list params="valueList: childList"></bmpp-value-list>\n      \x3c!-- /ko --\x3e\n\n    </li>\n  </ul>\n\n'};var te={type:"list",name:"Фазовая структура",id:"phase_structure",displayValues:!0,valueList:{orValues:[{name:"Мах",value:"S"},{name:"Мах, ретракция",value:"S R"},{name:"Подготовка, мах",value:"P S"},{name:"Подготовка, мах, ретракция",value:"P S R"},{name:"Подготовка-мах",value:"P-S"},{name:"Подготовка-мах, ретракция",value:"P-S R"},{name:"Другой вариант",editable:!0}]},validChars:["P","R","S","-"," "],substitute:[[/[sыЫ]/g,"S"],[/[pрРзЗ]/g,"P"],[/[rкК]/g,"R"],[/\s+/g," "],[/\s*[-_]\s*/g,"-"]]},ne={type:"list",name:"Иллокутивно-фазовое значение",id:"illocutionary_phase",displayValues:!0,valueList:{orValues:[{name:"Иллокутивное",orValues:[{name:"Завершение сообщения",value:"."},{name:"Вопрос",value:"?"},{name:"Директив",value:"¡"},{name:"Обращение",value:"@"},{name:"Полуутверждение",value:"¿"},{name:"Неполнота информации",value:"…"},{name:"Восклицательность",value:"!"}]},{name:"Фазовое",orValues:[{name:"Стандартная незавершенность",value:","},{name:"Незавершенность, восполняемая последующим контекстом",value:":"},{name:"Неполнота информации в контексте незавершенности",value:",,,"},{name:"Начальная часть сплита",value:"—"}]},{name:"Обрыв",addNameToChildNames:!0,orValues:[{name:"При самоисправлении",value:"=="},{name:"При апосиопезе",value:"~"},{name:"При вмешательстве собеседника",value:"≈≈"}]}]}},ie={type:"interval",name:"Число акцентов",id:"accents_n",fromOnlyBanner:"## и более",toOnlyBanner:"## и менее"},ae=[{type:"interval",name:"Длительность",id:"duration",step:20,units:"миллисекунд",unitsBanner:"мс",fromOnlyBanner:"не менее ##",toOnlyBanner:"не более ##",fromToEqualBanner:"ровно ##",help:'<header class="ui header">Интервал длительности единицы</header>\n  <p>Чтобы отобрать единицы, длительность которых не меньше указанной,\n  заполните только левое поле. Чтобы отобрать единицы, длительность которых\n  не больше указанной, заполните только правое поле. Свойство не будет\n  учитываться в запросе, если ничего не задать.</p>'},{type:"list",name:"Участники",id:"participants",valueList:{orValues:[{name:"Рассказчик",value:"N"},{name:"Комментатор",value:"C",disabledInChannels:["ocul"]},{name:"Пересказчик",value:"R"}]}},{type:"list",name:"Совпадение участников",id:"same_participant",valueList:{xorValues:[{name:"Да",value:!0},{name:"Нет",value:!1}]}}],re=ae.concat([{type:"text",name:"Словарная форма",id:"word",placeholder:"…"},{type:"interval",name:"Позиция от начала ЭДЕ",id:"position_within_edu",fromOnlyBanner:"##‐я и дальше",toOnlyBanner:"##‐я и ближе",fromLabel:"с",toLabel:"по",fromToBanner:"##–##"},ie,{type:"list",name:"Точка прерывания",id:"termination_point",valueList:{xorValues:[{name:"Да",orValues:[{name:"При самоисправлении внутри ЭДЕ",value:"vx1"},{name:"При самоисправлении на границе ЭДЕ",value:"vx2"},{name:"При вмешательстве внутри ЭДЕ",value:"vx3"},{name:"При вмешательстве на границе ЭДЕ",value:"vx4"}]},{name:"Нет",value:!1}]}},ne,te,{type:"list",name:"С акцентом",id:"with_accent",displayValues:!0,valueList:{xorValues:[{name:"Да",orValues:[{name:"С восходящим тоном",value:"/"},{name:"С нисходящим тоном",value:"\\"},{name:"С ровным тоном",value:"–"},{name:"С восходяще-нисходящим тоном",value:["/\\","/↓","↑\\"]},{name:"С восходяще-ровным тоном",value:["/–","/→"]},{name:"С нисходяще-восходящим тоном",value:["\\/","\\↑"]},{name:"Другой вариант",editable:!0}]},{name:"Нет",value:!1}]},virtualKeyboard:!0,validChars:["/","\\","–","↑","↓","→"],substitute:[[/[-\u2014\u2012]/g,"–"]]}]),oe={u_mGesture:ae.concat([{type:"list",name:"Рукость",id:"handedness",valueList:{orValues:[{name:"Леворучный",value:"l"},{name:"Праворучный",value:"r"},{name:"Двуручный с симетричной траекторией",value:"bs"},{name:"Двуручный с идентичной / единой траекторией",value:"bi"},{name:"Двуручный с различной траекторией у разных рук",value:"bd"},{name:"Прочее",value:"o"}]}},te,{type:"list",name:"Функциональный тип",id:"gesture_func_type",valueList:{orValues:[{name:"Изобразительный жест",value:"ic"},{name:"Указательный жест",value:"ix"},{name:"Жестовое ударение",value:"a"},{name:"Другое",value:"o"},{name:"Прагматический / метафорический жест",value:"pm"}]}},{type:"list",name:"Дополнительные признаки",id:"gesture_opts",valueList:{orValues:[{name:"Двуручный жест («туда-обратно»)",value:"ww"},{name:"Жест с многократным махом",value:"ms"},{name:"Отскок в конце маха",value:"sb"},{name:"Отскок в конце ретракции",value:"rb"},{name:"Многократный отскок в конце маха",value:"smb"},{name:"Длинная ретракция",value:"lr"},{name:"Наложение на текущий жест фазы другого жеста",value:"gi"},{name:"Повтор предыдущего жеста",value:"gr"},{name:"Обрыв в основном сформированного жеста",value:"z"},{name:"Обрыв жеста без маховой фазы",value:"zz"}]}}]),u_vEDU:ae.concat([ne,{type:"interval",name:"Число слов",id:"words_n",fromOnlyBanner:"## и более",toOnlyBanner:"## и менее"},{type:"interval",name:"Число абсолютных пауз",id:"abs_pauses_n",fromOnlyBanner:"## и более",toOnlyBanner:"## и менее"},{type:"interval",name:"Число заполненных пауз",id:"filled_pauses_n",fromOnlyBanner:"## и более",toOnlyBanner:"## и менее"},{type:"list",name:"Начинается с заполненной паузы",id:"startswith_filled_pause",valueList:{xorValues:[{name:"Да",value:!0},{name:"Нет",value:!1}]}},{type:"list",name:"Комбинация иллокутивно-фазовых значений",id:"illocutionary_phase_combination",valueList:{orValues:[{name:"Не-сообщение + незавершенность",value:"i1"},{name:"Не-сообщение + неполнота информации",value:"i2"},{name:"Не-сообщение + восклицательность",value:"i3"},{name:"Незавершенность + обрыв",value:"i4"},{name:"Прочее",value:"i5"}]}},{type:"interval",name:"Число точек прерывания",id:"ip_n",fromOnlyBanner:"## и более",toOnlyBanner:"## и менее"},ie,{type:"interval",name:"Число главных акцентов",id:"primary_accents_n",fromOnlyBanner:"## и более",toOnlyBanner:"## и менее"},{type:"interval",name:"Число вторичных акцентов после главного",id:"secondary_accents_n",fromOnlyBanner:"## и более",toOnlyBanner:"## и менее"},{type:"list",name:"Движение тона в главном акценте",id:"accent_movement",displayValues:!0,valueList:{orValues:[{name:"Восходящее",value:"/"},{name:"Нисходящее",value:"\\"},{name:"Ровное",value:"–"},{name:"Восходяще-нисходящее",value:["/\\","/↓","↑\\"]},{name:"Восходяще-ровное",value:["/–","/→"]},{name:"Нисходяще-восходящее",value:["\\/","\\↑"]},{name:"Другой вариант",editable:!0}]},virtualKeyboard:!0,validChars:["/","\\","–","↑","↓","→"],substitute:[[/[-\u2014\u2012]/g,"–"]]},{type:"list",name:"Входит в конструкцию со вставкой",id:"within_ins",valueList:{xorValues:[{name:"Да",orValues:[{name:"Непосредственно предшествует вставке",value:"wi1"},{name:"Первая ЭДЕ сложной вставки",value:"wi2"},{name:"Последняя ЭДЕ сложной вставки",value:"wi3"},{name:"Внутренняя ЭДЕ сложной вставки",value:"wi4"},{name:"Единственная ЭДЕ простой вставки",value:"wi5"},{name:"Непосредственно следует за вставкой",value:"wi6"},{name:"Первая ЭДЕ односторонней вставки",value:"wi7"}]},{name:"Нет",value:!1}]}},{type:"list",name:"Входит в конструкцию со сплитом",id:"within_split",valueList:{xorValues:[{name:"Да",value:!0},{name:"Нет",value:!1}]}},{type:"list",name:"Входит в совместное построение реплик",id:"within_muverb",valueList:{xorValues:[{name:"Да",orValues:[{name:"Достраивается другим участником",value:"wi1"},{name:"Достраивает реплику другого участника",value:"wi2"},{name:"И то, и другое",value:"wi3"}]},{name:"Нет",value:!1}]}},{type:"list",name:"Входит в конструкцию с (полу)прямой цитацией",id:"within_cit",valueList:{xorValues:[{name:"Да",orValues:[{name:"Вводит чужую речь (авторская ремарка)",value:"wc1"},{name:"Первая ЭДЕ сложной цитации",value:"wc2"},{name:"Последняя ЭДЕ сложной цитации",value:"wc3"},{name:"Внутренняя ЭДЕ сложной цитации",value:"wc4"},{name:"Единственная ЭДЕ простой цитации",value:"wc5"}]},{name:"Нет",value:!1}]}}])};function se(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length-1;i++){var a=t[i];if(a||0===a)return a}if(t.length>0)return t.slice(-1)[0]}function le(e){return[null,void 0,""].indexOf(e)<0}function ue(e,t){return e.replace("##",t.toString())}var ce=function(){function e(t,n){w(this,e),this.type=t.type,this.unitType=i.observable(n),this.id=t.id,this.name=t.name,this.help=t.help||"",this.value=i.observable(null),this.virtualKeyboard=t.virtualKeyboard||!1,this.validChars=t.validChars,this.validitySusbstitutions=this.getValueSubstitutions(t)}return _(e,[{key:"changeUnitType",value:function(e){this.unitType(e)}},{key:"getValueSubstitutions",value:function(e){var t=[];if(e.substitute&&e.substitute.length&&(t=e.substitute),e.validChars&&e.validChars.length){var n="[^".concat(e.validChars.join("").replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),"]");t.push([new RegExp(n,"g"),""])}return t}},{key:"makeValueValid",value:function(e){for(var t=0;t<this.validitySusbstitutions.length;t++){var n=V(this.validitySusbstitutions[t],2),i=n[0],a=n[1];e=e.replace(i,a)}return e}},{key:"insertText",value:function(e,t,i){return t=n(t).parents(".bmpp-valueList","li").find('input[type="text"]').get(0),function(){var n=t.selectionStart||0;i(i().slice(0,n)+e+i().slice(n)),n+=e.length,t.selectionStart=n,t.selectionEnd=n,t.focus()}}},{key:"onHeaderClick",value:function(){}},{key:"getJsonProperties",value:function(){return i.computed(function(){var e=this.value(),t=[];return le(e)&&t.push({prop:this.id,value:e}),t},this)}},{key:"getBanner",value:function(){return""}},{key:"isHeaderClickable",get:function(){return!1}}],[{key:"createByType",value:function(e,t){var n={interval:de,text:pe,list:me}[e.type];if(n)return new n(e,t)}}]),e}(),de=function(e){function t(e,n){var a;return w(this,t),(a=O(this,N(t).call(this,e,n))).from=i.observable(null),a.to=i.observable(null),a.units=e.units||"",a.from.min=se(e.fromMin,e.min,0),a.from.max=se(e.fromMax,e.max,null),a.from.step=e.fromStep||e.step||1,a.from.placeholder=e.fromPlaceholder||"",a.from.label=e.fromLabel||"от",a.from.banner=e.fromBanner||"от ##",a.from.onlyBanner=e.fromOnlyBanner||a.from.banner,a.to.min=se(e.toMin,e.min,0),a.to.max=se(e.toMax,e.max,null),a.to.step=e.toStep||e.step||1,a.to.placeholder=e.toPlaceholder||"",a.to.label=e.toLabel||"до",a.to.banner=e.toBanner||"до ##",a.to.onlyBanner=e.toOnlyBanner||a.to.banner,a.fromToBanner=e.fromToBanner||"".concat(a.from.banner," ").concat(a.to.banner),a.fromToEqualBanner=e.fromToEqualBanner||"##",a.unitsBanner=e.unitsBanner||e.units||"",a.tune(e),a}return C(t,ce),_(t,[{key:"tune",value:function(e){this.validitySusbstitutions=this.getValueSubstitutions(e),this.tuneValue(),this.jsonProperties=this.getJsonProperties(),this.banner=this.getBanner()}},{key:"tuneValue",value:function(){i.computed(function(){var e=this.from(),t=this.to.peek();le(e)&&le(t)&&e>t&&this.from(t)},this),i.computed(function(){var e=this.from.peek(),t=this.to();le(e)&&le(t)&&t<e&&this.to(e)},this),i.computed(function(){var e=this.from(),t=this.to(),n={};le(e)||le(t)?(le(e)&&(n.min=e),le(t)&&(n.max=t),this.value(n)):this.value(null)},this)}},{key:"getJsonProperties",value:function(){return i.computed(function(){var e=this.value(),t=[];return le(e)&&(le(e.min)&&t.push({prop:"".concat(this.id,"_min"),value:e.min}),le(e.max)&&t.push({prop:"".concat(this.id,"_max"),value:e.max})),t},this)}},{key:"getValueSubstitutions",value:function(e){var n=F(N(t.prototype),"getValueSubstitutions",this).call(this,e);return n.push([/[^\d]/g,""]),n}},{key:"getBanner",value:function(){return i.computed(function(){var e=this.from(),t=this.to(),n="";return le(e)&&le(t)&&(n=e===t?ue(this.fromToEqualBanner,e):ue(ue(this.fromToBanner,e),t)),le(e)&&!le(t)&&(n=ue(this.from.onlyBanner,e)),!le(e)&&le(t)&&(n=ue(this.to.onlyBanner,t)),n&&this.unitsBanner&&(n+=" "+this.unitsBanner),n},this)}}]),t}(),pe=function(e){function t(e,n){var i;return w(this,t),(i=O(this,N(t).call(this,e,n))).placeholder=e.placeholder||"",i.tune(),i}return C(t,ce),_(t,[{key:"tune",value:function(){this.jsonProperties=this.getJsonProperties(),this.banner=this.getBanner()}},{key:"getBanner",value:function(){return i.computed(function(){var e=this.value();return le(e)?"«".concat(e,"»"):""},this)}}]),t}();function he(e,t,n){var a=i.unwrap(t[e]);return a instanceof Array?(n=n.filter(function(e){return a.indexOf(e)<0})).concat(a):le(a)&&(n=n.filter(function(e){return e!==a})).push(a),n}var me=function(e){function t(e,n){var a;return w(this,t),(a=O(this,N(t).call(this,e,n))).displayValues=e.displayValues||!1,a.chosenValues=i.observableArray([]),a.valueList=new ve(e.valueList,null,S(S(a))),a.tune(),a}return C(t,ce),_(t,[{key:"tune",value:function(){this.tuneValue(),this.jsonProperties=this.getJsonProperties(),this.banner=this.getBanner()}},{key:"tuneValue",value:function(){i.computed(function(){var e=this.value,t=this.unwrapValues(this.chosenValues());if(t.length>0)if(this.valueList.isXOR&&1===t.length&&this.valueList.items.some(function(e){return e===t[0]})){var n=[];1===(n=he("value",t[0],n)).length?e(n[0]):e(n)}else{var i=[];t.map(function(e){i=he("value",e,i)}),e(i)}else e(null)},this)}},{key:"unwrapValues",value:function(e){return e.map(function(e){return i.isObservable(e)?e():e})}},{key:"onHeaderClick",value:function(){var e=this.valueList;this._lastActiveDepth=-1,this.isHeaderClickable&&(e.isOR?e.invertSelection():e.isXOR&&e.rotateSelection())}},{key:"getBanner",value:function(){return i.computed(function(){return this.chosenValues().map(function(e){for(var t="",n=e.list.depth>0&&e.list.parentItem;n&&n.addNameToChildNames;)t=n.name.slice(0,1).toLowerCase()+n.name.slice(1)+" "+t,n=n.list.depth>0&&n.list.parentItem;return t+(e.editable?"«".concat(e.value(),"»"):e.name.slice(0,1).toLowerCase()+e.name.slice(1))}).join("; ")},this)}},{key:"isHeaderClickable",get:function(){return this.valueList.hasNoChildList}}]),t}(),ve=function(){function e(t,n,i){var a=this;w(this,e),this.depth=null===n?0:n.list.depth+1,this.isOR=!t.xorValues,this.isXOR=!t.orValues,this.parentItem=n,this.listProperty=i,this.items=(this.isOR?t.orValues:t.xorValues).map(function(e){return new ye(e,a)})}return _(e,[{key:"checkAll",value:function(){this.items.forEach(function(e){var t=e.childList;e.checked(!0),t&&t.isOR?t.checkAll():t&&t.isXOR&&t.checkFirst()})}},{key:"checkFirst",value:function(){var e=this.items[0],t=e.childList;e.checked(!0),t&&t.isOR?t.checkAll():t&&t.isXOR&&t.checkFirst()}},{key:"uncheckAll",value:function(){this.items.forEach(function(e){e.checked(!1),e.childList&&e.childList.uncheckAll()})}},{key:"uncheckAllBut",value:function(e){this.items.forEach(function(t){t!==e&&t.checked(!1)})}},{key:"invertSelection",value:function(){this.items.forEach(function(e){e.checked(!e.checked())})}},{key:"rotateSelection",value:function(){var e=!1,t=!1;this.items.forEach(function(n){n.checked()?(e=!0,n.checked(!1)):e&&!t&&(n.checked(!0),t=!0)}),e||this.items[0].checked(!0)}},{key:"hasNoChildList",get:function(){return this.items.every(function(e){return!e.childList})}}]),e}();function be(e,t,n){var i=e.getListItemOnDepth(n),a=t.getListItemOnDepth(n),r=i.list.items.indexOf(i),o=a.list.items.indexOf(a);return r<o?-1:r>o?1:0}function fe(e,t){for(var n=0,i=be(e,t,n);0===i||e.list.depth<n&&t.list.depth<n;)i=be(e,t,n+=1);return i}var ye=function(){function e(t,n){w(this,e),this.list=n,this.name=t.name,this.checked=i.observable(null),this.userChecked=this.getUserChecked(),this.editable=t.editable||!1,this.disabledInChannels=t.disabledInChannels,this.disabled=this.getDisabledInfo(),this.value=this.editable?this.getValidatingValue():t.value,this.childList=t.orValues||t.xorValues?new ve(t,this,n.listProperty):null,this.addNameToChildNames=t.addNameToChildNames||!1,this.tuneXOR(),this.tuneParentList(),this.tuneChildList(),this.tuneEditable(),this.tuneCumulativeValue()}return _(e,[{key:"getDisabledInfo",value:function(){var e=this.disabledInChannels;return!!(e&&e.length>0)&&i.computed(function(){var t=this.list.listProperty.unitType().channel.id;return e.indexOf(t)>-1},this)}},{key:"getUserChecked",value:function(){return i.computed({read:this.checked,write:function(e){this.list.listProperty._lastActiveDepth=this.list.depth,this.checked(e)}},this)}},{key:"getValidatingValue",value:function(){var e=i.observable("");return i.computed({read:e,write:function(t){var n=e(),i=this.list.listProperty.makeValueValid(t);i!==n?e(i):t!==n&&e.notifySubscribers(i)}},this).extend({notify:"always"})}},{key:"tuneXOR",value:function(){this.list.isXOR&&i.computed(function(){this.checked()&&this.list.uncheckAllBut(this)},this)}},{key:"tuneParentList",value:function(){this.list.depth>0&&i.computed(function(){var e=this.checked(),t=this.list,n=t.parentItem;this.isChangeStraightforward&&(e&&!n.checked.peek()?n.checked(!0):!e&&n.checked.peek()&&t.items.every(function(e){return!e.checked.peek()})&&n.checked(!1))},this)}},{key:"tuneChildList",value:function(){this.childList&&i.computed(function(){var e=this.checked(),t=this.childList;this.isChangeStraightforward&&(e&&t.isOR?t.checkAll():e&&t.isXOR?t.checkFirst():e||t.uncheckAll())},this)}},{key:"tuneEditable",value:function(){this.editable&&(i.computed(function(){this.checked(!!this.value())},this),i.computed(function(){this.checked()&&!this.value.peek()&&(this.isChangeStraightforward&&n(this.userChecked.checkboxComponent).siblings(".ui.input").first().find('input[type="text"]').focus(),this.checked(!1))},this))}},{key:"tuneCumulativeValue",value:function(){i.computed(function(){var e=this.list.listProperty.chosenValues,t=this.disabled,n=this.checked();t=i.isObservable(t)?t():t,le(this.value)&&(e.remove(this),n&&!t&&(e.push(this),e.sort(fe)))},this)}},{key:"getListItemOnDepth",value:function(e){return e===this.list.depth?this:this.list.parentItem.getListItemOnDepth(e)}},{key:"isChangeStraightforward",get:function(){return this.list.listProperty._lastActiveDepth===this.list.depth}}]),e}(),ge=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];w(this,e),this.parentNode=t,this.childNodes=i.observableArray([]),this.relationsToParentNode=i.observableArray([]),this.depth=i.observable(t&&t.depth()+1||0),this.level=i.observable(0),this.serialNumber=i.observable(0),this.negative=i.observable(n),this.unitType=i.observable(null),this.unitProperties=i.observableArray([]),this.isEditStateForUnitType=i.observable(!0),this.tuneRelations(),this.tuneUnitProperties()}return _(e,[{key:"tuneRelations",value:function(){null!==this.parentNode&&this.addRelation()}},{key:"tuneUnitProperties",value:function(){var e=this,t=this.unitProperties;this.unitType.subscribe(function(e){null===e&&t([]);for(var n=t(),i=[],a=oe[e.id]||re,r=function(t){var r=a[t],o=n.find(function(e){return e.id===r.id});if(o)o.changeUnitType(e),i.push(o);else{var s=ce.createByType(r,e);i.push(s)}},o=0;o<a.length;o++)r(o);t(i)}),this.chosenUnitProperties=i.computed(function(){return e.unitProperties().filter(function(e){return i.unwrap(e.banner)})})}},{key:"addChild",value:function(){var t=new e(this,arguments.length>0&&void 0!==arguments[0]&&arguments[0]);this.childNodes.push(t)}},{key:"addRelation",value:function(){this.relationsToParentNode.push(new xe(this.parentNode,this))}},{key:"removeRelation",value:function(e){this.relationsToParentNode.remove(e)}},{key:"seppuku",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,a=this.childNodes()[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.seppuku()}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}this.relationsToParentNode.removeAll(),this.childNodes.removeAll(),this.parentNode.childNodes.remove(this)}}]),e}(),xe=function e(t,n){w(this,e),this.parentNode=t,this.childNode=n};var we=[{id:"pears04",label:"Pears 04",query:"04"},{id:"pears22",label:"Pears 22",query:"22"},{id:"pears23",label:"Pears 23",query:"23"},{id:"pears35",label:"Pears 35",query:"35"},{id:"pears37",label:"Pears 37",query:"37",disabled:!0},{id:"pears39",label:"Pears 39",query:"39",disabled:!0}],ke=[{id:"narration",label:"Рассказ",query:"telling"},{id:"dialogue",label:"Разговор",query:"talk"},{id:"retelling",label:"Пересказ",query:"retelling"}],_e=function e(t,n){w(this,e),this.value=i.observable(!1),this.id=t.id,this.label=t.label,this.disabled=Boolean(t.disabled),this.query=t.query,this.value.subscribe(function(){n(!0)})},Ce=function(){function e(t,n){w(this,e);var i=this;this.fields=[];var a=!0,r=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value;this.fields.push(new _e(u,n))}}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}this.invertSelection=function(){var e=!0,t=!1,n=void 0;try{for(var a,r=i.fields[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var o=a.value;o.disabled||o.value(!o.value())}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}},this.clearSelection=function(){var e=!0,t=!1,n=void 0;try{for(var a,r=i.fields[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var o=a.value;o.disabled||o.value(!1)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}}return _(e,[{key:"areAllUnchecked",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,a=this.fields[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var r=i.value;if(!r.disabled&&r.value())return!1}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}return!0}},{key:"getAllButDisabledQueryValues",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var a,r=this.fields[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;o.disabled||e.push(o.query)}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}return e}},{key:"getAllCheckedQueryValues",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var a,r=this.fields[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;!o.disabled&&o.value()&&e.push(o.query)}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}return e}},{key:"getQueryValuesForJSON",value:function(){return this.areAllUnchecked()?this.getAllButDisabledQueryValues():this.getAllCheckedQueryValues()}}]),e}(),Ne={version:"1.0",results:[{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:2200,end:3740},left_context:"N-vE002",value:"Годов \\семидесятых я думаю.",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:6010,end:8490},left_context:"N-vE005",value:"(ˀ 0.06) (ɐ 0.53) Мы видим˗м сельский /–пейзаж,,,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:25640,end:28380},left_context:"N-vE017",value:"у него (ɥ 0.29) на шее красный \\платок ↑завязан,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:50030,end:52790},left_context:"N-vE027",value:"там уже \\стоят (0.13) (ɥ 0.26) \\парочка корзин /полных,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:65950,end:68350},left_context:"N-vE034",value:"так всё очень не= || делает /нежно и \\любовноɯ.",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:106370,end:107350},left_context:"N-vE064",value:"велосипед /большой,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:107350,end:108550},left_context:"N-vE065",value:"какие \\старые /советские,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:131450,end:133380},left_context:"N-vE079",value:"видит \\фермер собирает там –груши,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:133380,end:134920},left_context:"N-vE080",value:"полностью поглощён этим /занятием,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:151010,end:152500},left_context:"N-vE090",value:"с этой тяжеленной /↑корзиной,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:192570,end:193790},left_context:"N-vE117",value:"он один из них /приспускает,",right_context:"Произносит [прыспускает]."},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:228210,end:230180},left_context:"N-vE136",value:"(ˀ 0.11) Они \\помогают ему /подняться=,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:230180,end:231170},left_context:"N-vE137",value:"(ə 0.04) (\\Двое /помогают,",right_context:"Произносит [помогаюƟ]."},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:231170,end:233480},left_context:"N-vE138",value:"/ˀодин так и сту= || и \\стучит своей этой \\↑штукой.)",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:255660,end:256960},left_context:"N-vE152",value:"/поднимают они ↑её,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:271630,end:272320},left_context:"N-vE161",value:"взамен \\шляпы,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:445390,end:447440},left_context:"N-vE238",value:"/Корзины прям просто под \\грушей /стоят,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:480570,end:481360},left_context:"N-vE246",value:"Ничего не \\видно, ",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:596290,end:597690},left_context:"N-vE289",value:"я бы \\свалилась точно.",right_context:"Второе слово произносит [салилась]. Последнее слово — шепотом."},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:766410,end:768090},left_context:"N-vE325",value:"Как˗к какая-то \\əшпанаɯ.",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:770110,end:772280},left_context:"N-vE326",value:"Ну /сначала как-то они \\подозрительно выглядят,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:772280,end:773340},left_context:"N-vE327",value:"но /вообще \\нормально.",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:773340,end:774340},left_context:"N-vE328",value:"Они ему /помогают...",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:801810,end:802150},left_context:"N-vE329",value:"(ɯ 0.19) \\Да,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:802150,end:803460},left_context:"N-vE330",value:"он /садится,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:803630,end:805600},left_context:"N-vE331",value:"(ə 0.16) см= || смотрит свою /–коленку,,, ≈≈",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:805600,end:806230},left_context:"N-vE332",value:"Ну прямо \\так, ",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:806230,end:807020},left_context:"N-vE333",value:"он /лежал сначала,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:841780,end:843470},left_context:"N-vE343",value:"ˀОни ст= || \\поднимают ему всё это,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:928410,end:928890},left_context:"N-vE364",value:"/Не- \\н˗не!,",right_context:""},{record_id:22,participant:"N",tier:"N-vSForm",annotation_index:20,time:{begin:1092770,end:1095300},left_context:"N-vE385",value:"мы /ничего˗оə || (0.40) уже не \\поправляем /никого.",right_context:""}]},Pe=e("bmpp-videoPlayer"),Se="http://multidiscourse.ru:8080/search_annotations/SearchAnnotations";var Oe=new function(){var e=this,t=this;this.queryPane=Symbol.for("query"),this.subcorpusPane=Symbol.for("subcorpus"),this.resultsPane=Symbol.for("results"),this.resultsOptionsPane=Symbol.for("resoptions"),this.panes=[this.queryPane,this.subcorpusPane,this.resultsPane,this.resultsOptionsPane],this.activePane=i.observable(),this.switchOnQueryPane=function(){t.activePane(t.queryPane)},this.switchOnSubcorpusPane=function(){t.activePane(t.subcorpusPane)},this.switchOnResultsPane=function(){t.activePane(t.resultsPane)},this.switchOnResultsOptionsPane=function(){t.activePane(t.resultsOptionsPane)},this.isQueryPaneOn=i.computed(function(){return e.activePane()===t.queryPane}),this.isSubcorpusPaneOn=i.computed(function(){return e.activePane()===t.subcorpusPane}),this.isResultsPaneOn=i.computed(function(){return e.activePane()===t.resultsPane}),this.isResultsOptionsPaneOn=i.computed(function(){return e.activePane()===t.resultsOptionsPane}),i.computed(function(){var e=t.activePane();e&&(v("/".concat(Symbol.keyFor(e))),Pe.pause())}),this.queryPaneView=i.observable(null),this.queryPaneView.isTreeVisible=i.computed(function(){return null===t.queryPaneView()}),this.queryPaneView.editNodeProperties=function(e){t.queryPaneView(e)},this.queryPaneView.finishEditingNodeProperties=function(){t.queryPaneView(null)},this.queryPaneView.arePropertiesVisible=i.computed(function(){return t.queryPaneView()instanceof ge}),this.queryPaneView.propertiesNode=i.computed(function(){if(t.queryPaneView.arePropertiesVisible())return t.queryPaneView.peek()}),this.queryPartsNonReadiness=i.observableArray([this.queryPaneView.arePropertiesVisible]),this.isQueryReady=i.computed(function(){var e=!0,n=!1,i=void 0;try{for(var a,r=t.queryPartsNonReadiness()[Symbol.iterator]();!(e=(a=r.next()).done);e=!0)if((0,a.value)())return!1}catch(e){n=!0,i=e}finally{try{e||null==r.return||r.return()}finally{if(n)throw i}}return!(!t.queryTree||!t.queryTree.unitType())}).extend({rateLimit:50}),this.isQueryNew=i.observable(!0),this.isSubcorpusNew=i.observable(!1),this.subcorpus={records:new Ce(we,this.isSubcorpusNew),recordPhases:new Ce(ke,this.isSubcorpusNew)},this.queryTree=new ge,this.canSearch=i.computed(function(){var e=t.isQueryReady(),n=t.isQueryNew(),i=t.isSubcorpusNew();return!(!e||!n&&!i)}),this.lastQueryJSON="",this.queryJSON=i.computed(function(){return t.canSearch()&&(t.lastQueryJSON=function(e){for(var t={version:"1.0",record_ids:e.subcorpus.records.getQueryValuesForJSON(),segments:e.subcorpus.recordPhases.getQueryValuesForJSON(),conditions:{}},n=U(e.queryTree),i=0;i<n.length;i++){var a=n[i],r=a.unitType().tiers,o={type:"simple",is_regex:!0,search:".+"},s=r&&r.length>0?r:["-vSForm"];if(s=s.map(function(e){return["N"+e,"R"+e,"C"+e]}).reduce(function(e,t){return e.concat(t)}),o.tiers=s,t.conditions[a.serialNumber().toString()]=o,i>0){var l=a.parentNode,u=a,c=l.serialNumber().toString(),d=u.serialNumber().toString(),p={first_condition_id:c,second_condition_id:d,is_same_tier:l.unitType().channel.id===u.unitType().channel.id,type:"overlaps"};t.conditions["".concat(c,".").concat(d)]=p}}return JSON.stringify(t,null,4)}(t)),t.lastQueryJSON}).extend({rateLimit:500}),this.search=function(){t.canSearch()&&(t.isSearchInProgress(!0),n.ajax(Se,{data:{data:t.queryJSON()}}).done(function(e){t.isQueryNew(!1),t.isSubcorpusNew(!1),t.results(e),t.resultsError(null)}).fail(function(e,n,i){t.results(Ne),t.resultsError("Ошибка: ".concat(n,' "').concat(i,'"'))}).always(function(){t.isSearchInProgress(!1),t.canViewResults(!0),t.switchOnResultsPane()}))},this.isSearchInProgress=i.observable(!1),this.canViewResults=i.observable(!1),this.results=i.observable(Ne),this.resultsError=i.observable(null),this.responseJSON=i.computed(function(){return JSON.stringify(t.results(),null,4)}),this.playVideo=function(e){var t=e.time,n=t.begin,i=t.end,a=function(){Pe.currentTime()>=i&&Pe.pause()};n/=1e3,i/=1e3,Pe.currentTime(n),void 0!==Pe.pauseFunction&&Pe.off("timeupdate",Pe.pauseFunction),Pe.pauseFunction=a,Pe.on("timeupdate",a),Pe.play()}};!function(e,t){e.bindingHandlers.popup={init:function(t,i,a){var r=e.unwrap(i()),o=a.get("popupOpts")||{};o.html=r,n(t).popup(o),e.unwrap(a.get("popupAdditionalShowOnClick"))&&n(t).click(function(){n(t).popup("show")})}},e.bindingHandlers.inlinePopup={init:function(t,i){var a=e.unwrap(i())||{inline:!0};n(t).popup(a)}},e.bindingHandlers.textLowercaseFirstChar={update:function(t,i){var a=e.unwrap(i());n(t).text(a.slice(0,1).toLowerCase()+a.slice(1))}},e.components.register("text-property",Z),e.components.register("interval-property",y),e.components.register("bmpp-value-list",ee),e.components.register("list-property",g),e.components.register("search-unit-property",W),e.components.register("properties-pane",x),e.components.register("bmpp-checkbox",b),e.components.register("query-pane",A),e.components.register("subcorpus-pane",Y),e.components.register("query-node",q),e.components.register("query-node-relations",R),e.components.register("search-unit-choice",K),e.applyBindings(t)}(i,Oe);var Fe=Symbol.keyFor(Oe.queryPane),Ve=Symbol.keyFor(Oe.subcorpusPane),Le=Symbol.keyFor(Oe.resultsPane),Te=Symbol.keyFor(Oe.resultsOptionsPane);v.base("/bumppo-ghpages/07"),v("/",function(){Oe.activePane(Oe.queryPane)}),v("/".concat(Fe),function(){Oe.activePane(Oe.queryPane)}),v("/".concat(Ve),function(){Oe.activePane(Oe.subcorpusPane)}),v("/".concat(Le),function(){Oe.canViewResults()?Oe.activePane(Oe.resultsPane):Oe.activePane(Oe.queryPane)}),v("/".concat(Te),function(){Oe.activePane(Oe.resultsOptionsPane)}),v({hashbang:!0}),n(".bmpp-sidePane_menuItem").mouseover(function(){n(this).hasClass("disabled")||n(this).addClass("bmpp-sidePane_menuItem--hover")}),n(".bmpp-sidePane_menuItem").mouseout(function(){n(this).removeClass("bmpp-sidePane_menuItem--hover")}),Pe.ready(function(){var e=Pe.volume();Pe.volume(0),Pe.currentTime(0),Pe.pause(),Pe.volume(e)}),n("#safetyCurtain").fadeOut()}(videojs,SVG,jQuery,ko);
//# sourceMappingURL=spa.js.map
